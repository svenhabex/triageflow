<div class="flex flex-col justify-end h-full w-full gap-8">
  <div class="flex flex-col gap-6">
    @for (message of messages(); track $index) {
      <flow-message-bubble
        [content]="message.content"
        [type]="message.sender"
      />
    }

    @if (isLoading()) {
      <flow-chat-loading />
    }
  </div>

  <form
    class="flex items-end gap-4 rounded-xl bg-white shadow-xl"
    [formGroup]="form"
    (ngSubmit)="triggerSendMessage()"
  >
    <textarea
      name="input"
      class="flex-1 p-4 field-sizing-content border-none bg-transparent h-full max-h-[400px] resize-none outline-none"
      pTextarea
      formControlName="message"
      (keydown)="onKeyDown($event)"
    ></textarea>
    <div class="flex pr-4 pb-4 pt-4">
      <button pButton icon="pi pi-arrow-up" severity="contrast" type="submit">
        Send
      </button>
    </div>
  </form>
</div>
