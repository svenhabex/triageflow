<div class="flex flex-col justify-end gap-6 flex-1 h-full">
  <div class="flex flex-col gap-6">
    @for (message of messages(); track message.text) {
      <flow-message-bubble [content]="message.text" [type]="message.sender" />
    }

    @if (isLoading()) {
      <flow-loading-dots />
    }
  </div>

  <form
    class="flex items-end gap-4 border border-surface-700 rounded-xl bg-surface-900"
    [formGroup]="form"
    (ngSubmit)="triggerSendMessage()"
  >
    <textarea
      name="input"
      class="flex-1 field-sizing-content border-none bg-transparent h-full max-h-[400px] resize-none"
      pTextarea
      formControlName="message"
      (keydown)="onKeyDown($event)"
    ></textarea>
    <div class="flex pr-4 pb-4 pt-4">
      <button pButton icon="pi pi-send" type="submit">Send</button>
    </div>
  </form>
</div>
